@model HospitalityProject.Models.User
@{
    ViewData["Title"] = "Your Profile";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-lg p-4 rounded-3">
                <!-- Avatar -->
                <div class="text-center mb-3">
                    <img src="~/user.png" alt="Profile"
                         class="rounded-circle border border-3"
                         style="width:120px;height:120px;border-color:#009ca6;" />
                </div>

                <!-- Welcome Text -->
                <h2 class="text-center text-primary mb-4">Welcome, @Model.FirstName @Model.LastName!</h2>

                <!-- Success Message -->
                @if (ViewBag.Message != null)
                {
                    <div class="alert alert-success text-center">@ViewBag.Message</div>
                }

                <!-- Editable Form -->
                <form asp-action="Profile" method="post" id="profileForm">
                    <div class="mb-3">
                        <label class="form-label fw-bold">Username</label>
                        <input type="text" class="form-control" value="@Model.Username" readonly />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">First Name</label>
                        <input asp-for="FirstName" class="form-control editable" disabled />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Last Name</label>
                        <input asp-for="LastName" class="form-control editable" disabled />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Email</label>
                        <input asp-for="Email" class="form-control editable" disabled />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Phone</label>
                        <input asp-for="Phone" class="form-control editable" disabled />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Change Password (optional)</label>
                        <input type="password" name="newPassword" class="form-control editable" placeholder="Enter new password" disabled />
                    </div>

                    <!-- Buttons -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="/Account/Logout" class="btn btn-danger">Logout</a>
                        <button type="button" id="editBtn" class="btn btn-warning">Edit</button>
                        <button type="submit" id="saveBtn" class="btn btn-success d-none">Save Changes</button>
                    </div>
                </form>

                <!-- Back Button -->
                <div class="text-center mt-3">
                    <button type="button" class="btn btn-secondary" onclick="window.history.back();">Back</button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    body {
        background-color: #f8f9fa;
    }

    .card {
        border-radius: 15px;
    }

    .btn-success {
        background-color: #009ca6;
        border-color: #009ca6;
    }

        .btn-success:hover {
            background-color: #007f87;
            border-color: #007f87;
        }
</style>

<script>
    const editBtn = document.getElementById('editBtn');
    const saveBtn = document.getElementById('saveBtn');
    const editableInputs = document.querySelectorAll('.editable');

    editBtn.addEventListener('click', function () {
        editableInputs.forEach(input => input.disabled = false);
        editBtn.classList.add('d-none');
        saveBtn.classList.remove('d-none');
    });
</script>
